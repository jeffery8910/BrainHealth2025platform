<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤§è…¦å¥åº·ä¸­å¿ƒ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tab-button.active {
            background-color: #2563eb; /* Tailwind blue-600 */
            color: white;
        }
        .game-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        /* Memory Game Specific Styles */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            width: 320px; /* Adjust as needed */
            margin: 20px auto;
        }
        .memory-card {
            width: 70px;
            height: 70px;
            background-color: #93c5fd; /* Tailwind blue-300 */
            border-radius: 8px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            cursor: pointer;
            transition: transform 0.3s, background-color 0.3s;
            perspective: 1000px;
        }
        .memory-card .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 8px;
        }
        .memory-card .card-front {
            background-color: #60a5fa; /* Tailwind blue-400 */
        }
        .memory-card .card-back {
            background-color: #93c5fd; /* Tailwind blue-300 */
            transform: rotateY(180deg);
        }
        .memory-card.flipped {
            transform: rotateY(180deg);
        }
         .memory-card.matched {
            background-color: #4ade80; /* Tailwind green-400 */
            cursor: default;
            opacity: 0.7;
        }
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 100; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* Could be more or less, depending on screen size */
            max-width: 500px;
            border-radius: 8px;
            text-align: center;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 p-4 md:p-8">
    <div class="container mx-auto max-w-5xl bg-white shadow-xl rounded-lg p-6 md:p-10">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-blue-600">å¤§è…¦å¥åº·ä¸­å¿ƒ</h1>
            <p class="text-gray-600 mt-2">æ¢ç´¢ä¿ƒé€²èªçŸ¥å¥åº·çš„æ—¥å¸¸è¡Œç‚ºã€äº’å‹•å·¥å…·èˆ‡ç›Šæ™ºéŠæˆ²</p>
        </header>

        <div class="mb-6 border-b border-gray-300">
            <nav class="flex flex-wrap -mb-px" aria-label="Tabs">
                <button class="tab-button active text-lg font-medium mr-2 py-3 px-5 rounded-t-lg hover:bg-blue-500 hover:text-white focus:outline-none" onclick="openTab(event, 'learningUnits')">
                    å­¸ç¿’é‡é»
                </button>
                <button class="tab-button text-lg font-medium mr-2 py-3 px-5 rounded-t-lg hover:bg-blue-500 hover:text-white focus:outline-none" onclick="openTab(event, 'simulators')">
                    å¥è…¦æ¨¡æ“¬å™¨
                </button>
                <button class="tab-button text-lg font-medium py-3 px-5 rounded-t-lg hover:bg-blue-500 hover:text-white focus:outline-none" onclick="openTab(event, 'games')">
                    ç›Šæ™ºå°éŠæˆ²
                </button>
            </nav>
        </div>

        <div id="learningUnits" class="tab-content active p-4">
            <h2 class="text-2xl font-semibold text-blue-700 mb-6">å­¸ç¿’é‡é»ï¼šå¤§è…¦ä¿å¥å…¨æ–¹ä½æŒ‡å—</h2>
            
            <div class="space-y-6">
                <section class="bg-blue-50 p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold text-blue-600 mb-3">ä¸€ã€å¯å¡‘çš„å¤§è…¦ï¼šæŒæ§æ‚¨çš„è…¦éƒ¨å¥åº·</h3>
                    <p class="mb-2">å¤§è…¦å…·æœ‰<strong class="text-blue-700">ç¥ç¶“å¯å¡‘æ€§</strong>ï¼Œæ„å‘³è‘—å®ƒèƒ½çµ‚èº«å½¢æˆæ–°çš„ç¥ç¶“é€£æ¥ã€‚åƒèˆ‡å…·æŒ‘æˆ°æ€§çš„æ´»å‹•èƒ½åˆºæ¿€è…¦æºæ€§ç¥ç¶“ç‡Ÿé¤Šå› å­ (BDNF)ï¼Œå°ç¥ç¶“å…ƒç”Ÿé•·è‡³é—œé‡è¦ã€‚</p>
                    <p>è…¦éƒ¨å¥åº·ä¸¦éä¸€æˆä¸è®Šï¼Œå¯ä»¥é€éå¾Œå¤©åŠªåŠ›å¡‘é€ ã€‚</p>
                </section>

                <section class="bg-green-50 p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold text-green-600 mb-3">äºŒã€è…¦éƒ¨å¥åº·é—œéµç”Ÿæ´»æ–¹å¼æ”¯æŸ±</h3>
                    <p class="mb-4">ç¶­è­·èˆ‡æå‡è…¦éƒ¨å¥åº·éœ€å¾å¤šæ–¹é¢è‘—æ‰‹ï¼Œé€™äº›æ”¯æŸ±ç·Šå¯†ç›¸é€£ã€ç›¸äº’å½±éŸ¿ï¼š</p>
                    <ul class="list-disc list-inside space-y-3 pl-4">
                        <li>
                            <strong class="text-green-700">é«”è‚²é›éŠï¼š</strong>
                            <ul class="list-circle list-inside pl-6 mt-1 space-y-1 text-sm text-gray-700">
                                <li><strong>æœ‰æ°§é‹å‹•ï¼š</strong>æ¯é€±è‡³å°‘150åˆ†é˜ä¸­ç­‰å¼·åº¦æˆ–75åˆ†é˜é«˜å¼·åº¦ (å¿«èµ°ã€æ…¢è·‘ã€æ¸¸æ³³)ã€‚ä¿ƒé€²BDNFï¼Œæ”¹å–„è¨˜æ†¶åŠ›ã€åŸ·è¡ŒåŠŸèƒ½ã€‚</li>
                                <li><strong>é˜»åŠ›/è‚ŒåŠ›è¨“ç·´ï¼š</strong>æ¯é€±è‡³å°‘2æ¬¡ã€‚å¢å¼·èªçŸ¥æ§åˆ¶ã€è¨˜æ†¶è¡¨ç¾ã€‚</li>
                                <li><strong>èº«å¿ƒé‹å‹•ï¼š</strong>ç‘œä¼½ã€å¤ªæ¥µæ‹³ã€‚æ”¹å–„æƒ…ç·’èª¿ç¯€ã€å£“åŠ›æ¸›è¼•ã€èªçŸ¥å½ˆæ€§ã€‚</li>
                                <li><strong>é›™é‡ä»»å‹™é‹å‹•ï¼š</strong>é‹å‹•çµåˆèªçŸ¥æŒ‘æˆ° (é‚Šèµ°è·¯é‚Šç®—æ•¸)ã€‚</li>
                            </ul>
                        </li>
                        <li>
                            <strong class="text-green-700">é£²é£Ÿèˆ‡ç‡Ÿé¤Šï¼š</strong>
                            <ul class="list-circle list-inside pl-6 mt-1 space-y-1 text-sm text-gray-700">
                                <li><strong>MINDé£²é£Ÿæ³•ï¼š</strong>å¼·èª¿ç¶ è‘‰è”¬èœ(æ¯é€±â‰¥7ä»½)ã€å…¶ä»–è”¬èœ(æ¯é€±â‰¥7ä»½)ã€è“æœ(æ¯é€±â‰¥5ä»½)ã€å …æœ(æ¯é€±â‰¥5ä»½)ã€æ©„æ¬–æ²¹ã€å…¨ç©€ç‰©ã€é­šé¡ã€è±†é¡ã€å®¶ç¦½ã€‚é™åˆ¶ç´…è‚‰ã€å¥¶æ²¹ã€èµ·å¸ã€ç”œé£Ÿã€æ²¹ç‚¸é£Ÿå“ã€‚</li>
                                <li><strong>é—œéµç‡Ÿé¤Šç´ ï¼š</strong>Omega-3è„‚è‚ªé…¸ (é­šæ²¹ã€å …æœ)ã€æŠ—æ°§åŒ–ç‰© (è”¬æœ)ã€ç¶­ç”Ÿç´ Bç¾¤ã€æ°´åˆ†ã€‚</li>
                                <li><strong>é™åˆ¶ï¼š</strong>ã€Œå£æ²¹ã€(æ²™æ‹‰æ²¹ã€åå¼è„‚è‚ª)ã€åŠ å·¥é£Ÿå“ã€éé‡ç³–åˆ†ã€‚</li>
                            </ul>
                        </li>
                        <li>
                            <strong class="text-green-700">è…¦åŠ›æ¿€ç›ªèˆ‡èªçŸ¥è¨“ç·´ï¼š</strong>
                            <ul class="list-circle list-inside pl-6 mt-1 space-y-1 text-sm text-gray-700">
                                <li><strong>çµ‚èº«å­¸ç¿’ï¼š</strong>å­¸ç¿’æ–°æŠ€èƒ½ï¼Œå¦‚èªè¨€ (æ¯æ—¥15-20åˆ†é˜)ã€æ¨‚å™¨ (æ¯æ—¥20-30åˆ†é˜)ã€‚</li>
                                <li><strong>ç›Šæ™ºéŠæˆ²èˆ‡æ´»å‹•ï¼š</strong>é–±è®€ã€æ‹¼åœ–ã€æ£‹ç›¤éŠæˆ²ã€æ•¸ç¨ã€‚</li>
                                <li><strong>ä¿æŒå¥½å¥‡å¿ƒèˆ‡åƒèˆ‡åº¦ã€‚</strong></li>
                            </ul>
                        </li>
                        <li><strong class="text-green-700">å„ªè³ªç¡çœ ï¼š</strong>å°è¨˜æ†¶éå›ºè‡³é—œé‡è¦ã€‚</li>
                        <li><strong class="text-green-700">ç¤¾äº¤äº’å‹•ï¼š</strong>ç©æ¥µåƒèˆ‡ç¤¾äº¤æ´»å‹•ã€‚</li>
                        <li><strong class="text-green-700">å£“åŠ›ç®¡ç†ï¼š</strong>å­¸ç¿’æ”¾é¬†æŠ€å·§ï¼Œå¦‚å†¥æƒ³ã€æ·±å‘¼å¸ã€‚</li>
                    </ul>
                </section>

                <section class="bg-yellow-50 p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold text-yellow-700 mb-3">ä¸‰ã€åŠæ—©ä¸¦çµ‚èº«å¯¦è¸</h3>
                    <p>åŠæ—©ä¸¦çµ‚èº«å¯¦è¸æœ‰ç›Šå¤§è…¦çš„è¡Œç‚ºï¼Œèƒ½å¸¶ä¾†é¡¯è‘—çš„ç¥ç¶“ä¿è­·æ•ˆç›Šï¼Œå¯èƒ½å»¶ç·©æˆ–é™ä½èªçŸ¥è¡°é€€åŠå¤±æ™ºç—‡çš„é¢¨éšªã€‚ã€Œæ°¸é ä¸æœƒå¤ªæ—©ï¼Œä¹Ÿæ°¸é ä¸æœƒå¤ªæ™šé–‹å§‹ã€ä¿è­·æˆ‘å€‘çš„å¤§è…¦ã€‚</p>
                </section>
            </div>
        </div>

        <div id="simulators" class="tab-content p-4">
            <h2 class="text-2xl font-semibold text-blue-700 mb-6">å¥è…¦æ¨¡æ“¬å™¨ï¼šäº’å‹•é«”é©—</h2>
            
            <div class="space-y-8">
                <section class="bg-indigo-50 p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold text-indigo-600 mb-4">MINDé£²é£Ÿæ³•ç°¡æ˜“æª¢è¦–å™¨</h3>
                    <p class="mb-4 text-sm text-gray-600">æ ¹æ“šMINDé£²é£Ÿæ³•çš„å»ºè­°ï¼Œå‹¾é¸æ‚¨é€šå¸¸ä¸€é€±å…§æœƒé”æˆçš„é …ç›®ï¼š</p>
                    <div id="mindDietForm" class="space-y-3">
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±è‡³å°‘7ä»½ç¶ è‘‰è”¬èœ (å¦‚è èœã€ç¾½è¡£ç”˜è—)</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±è‡³å°‘7ä»½å…¶ä»–è”¬èœ</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±è‡³å°‘5ä»½è“æœ (å¦‚è—è“ã€è‰è“)</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±è‡³å°‘5ä»½å …æœ</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> ä¸»è¦ä½¿ç”¨æ©„æ¬–æ²¹</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±è‡³å°‘21ä»½å…¨ç©€ç‰© (æ¯æ—¥3ä»½ä»¥ä¸Š)</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±è‡³å°‘1ä»½é­šé¡ (éæ²¹ç‚¸)</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±è‡³å°‘3ä»½è±†é¡</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±è‡³å°‘2ä»½å®¶ç¦½ (éæ²¹ç‚¸ã€å»çš®)</label></div>
                        <hr class="my-3">
                        <p class="text-sm text-gray-600">ä»¥ä¸‹é …ç›®æ‡‰é™åˆ¶ï¼Œå‹¾é¸ä»£è¡¨æ‚¨ã€Œæœ‰ã€æˆåŠŸé™åˆ¶ï¼š</p>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±ç´…è‚‰å°‘æ–¼4é¤</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±å¥¶æ²¹/äººé€ å¥¶æ²¹å°‘æ–¼7å°å¡Š (æ¯æ—¥<1æ¹¯åŒ™)</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±èµ·å¸å°‘æ–¼2ä»½</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±ç³•é»/ç”œé£Ÿå°‘æ–¼5ä»½</label></div>
                        <div><label class="flex items-center"><input type="checkbox" class="form-checkbox h-5 w-5 text-indigo-600 rounded mr-2" data-points="1"> æ¯é€±é€Ÿé£Ÿ/æ²¹ç‚¸é£Ÿå“å°‘æ–¼1é¤</label></div>
                    </div>
                    <button onclick="calculateMindScore()" class="mt-6 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded-lg shadow focus:outline-none">è¨ˆç®—æˆ‘çš„MINDé£²é£Ÿ adherence</button>
                    <div id="mindScoreResult" class="mt-4 text-lg font-semibold"></div>
                </section>

                <section class="bg-teal-50 p-6 rounded-lg shadow">
                    <h3 class="text-xl font-semibold text-teal-600 mb-4">ç°¡æ˜“å¥è…¦æ´»å‹•è¦åŠƒå»ºè­°</h3>
                    <p class="mb-2 text-sm text-gray-600">é¸æ“‡æ‚¨æ„Ÿèˆˆè¶£çš„å¥è…¦æ´»å‹•é¡å‹ï¼Œçœ‹çœ‹ä¸€é€±å¯ä»¥å¦‚ä½•å®‰æ’ï¼š</p>
                    <select id="activityType" class="w-full md:w-1/2 p-2 border border-gray-300 rounded-md focus:ring-teal-500 focus:border-teal-500 mb-3">
                        <option value="aerobic">æœ‰æ°§é‹å‹•</option>
                        <option value="strength">è‚ŒåŠ›è¨“ç·´</option>
                        <option value="mindBody">èº«å¿ƒé‹å‹•</option>
                        <option value="cognitive">èªçŸ¥è¨“ç·´</option>
                    </select>
                    <button onclick="getActivitySuggestion()" class="bg-teal-500 hover:bg-teal-600 text-white font-semibold py-2 px-4 rounded-lg shadow focus:outline-none">ç²å–å»ºè­°</button>
                    <div id="activitySuggestionResult" class="mt-4 p-4 bg-white rounded-md border border-teal-200"></div>
                </section>
            </div>
        </div>

        <div id="games" class="tab-content p-4">
            <h2 class="text-2xl font-semibold text-blue-700 mb-6">ç›Šæ™ºå°éŠæˆ²ï¼šè…¦åŠ›é›éŠ</h2>
            <p class="mb-6 text-gray-600">é€éä»¥ä¸‹å°éŠæˆ²ä¾†æ´»åŒ–æ‚¨çš„å¤§è…¦ï¼Œé›éŠè¨˜æ†¶åŠ›èˆ‡å°ˆæ³¨åŠ›ï¼</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="game-card bg-purple-100 p-6 rounded-lg shadow-md text-center">
                    <h3 class="text-xl font-semibold text-purple-700 mb-3">è¨˜æ†¶é…å°</h3>
                    <p class="text-sm text-purple-600 mb-4">ç¿»é–‹å¡ç‰‡ï¼Œæ‰¾å‡ºæ‰€æœ‰ç›¸åŒçš„é…å°ã€‚è€ƒé©—æ‚¨çš„çŸ­æœŸè¨˜æ†¶åŠ›ï¼</p>
                    <button onclick="startMemoryGame()" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded-lg focus:outline-none">é–‹å§‹éŠæˆ²</button>
                    <div id="memoryGameContainer" class="mt-4"></div>
                </div>

                <div class="game-card bg-orange-100 p-6 rounded-lg shadow-md text-center">
                    <h3 class="text-xl font-semibold text-orange-700 mb-3">å¿«é€Ÿè¨ˆç®—</h3>
                    <p class="text-sm text-orange-600 mb-4">åœ¨é™å®šæ™‚é–“å…§å®Œæˆæ•¸å­¸é¡Œç›®ã€‚æå‡æ‚¨çš„è¨ˆç®—é€Ÿåº¦èˆ‡å°ˆæ³¨åŠ›ï¼</p>
                    <input type="number" id="mathAnswer" placeholder="è¼¸å…¥ç­”æ¡ˆ" class="p-2 border rounded w-full mb-2 text-center">
                    <div id="mathProblem" class="text-lg font-bold mb-2"></div>
                    <button onclick="startMathGame()" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-lg focus:outline-none mr-2">å‡ºé¡Œ</button>
                    <button onclick="checkMathAnswer()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg focus:outline-none">æª¢æŸ¥ç­”æ¡ˆ</button>
                    <div id="mathResult" class="mt-2 text-sm"></div>
                </div>
                 <div class="game-card bg-cyan-100 p-6 rounded-lg shadow-md text-center">
                    <h3 class="text-xl font-semibold text-cyan-700 mb-3">å­—æ¯é‡çµ„</h3>
                    <p class="text-sm text-cyan-600 mb-4">å°‡æ‰“äº‚çš„å­—æ¯é‡æ–°æ’åˆ—æˆä¸€å€‹æœ‰æ„ç¾©çš„è©å½™ (æç¤º: èˆ‡å¤§è…¦å¥åº·ç›¸é—œ)ã€‚</p>
                    <div id="scrambledWord" class="text-2xl font-bold tracking-widest my-3"></div>
                    <input type="text" id="wordGuess" placeholder="çŒœçŒœçœ‹æ˜¯ä»€éº¼è©" class="p-2 border rounded w-full mb-2 text-center">
                    <button onclick="startWordScramble()" class="bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-2 px-4 rounded-lg focus:outline-none mr-2">æ›ä¸€å€‹è©</button>
                    <button onclick="checkWordGuess()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg focus:outline-none">æª¢æŸ¥ç­”æ¡ˆ</button>
                    <div id="wordScrambleResult" class="mt-2 text-sm"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="gameResultModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal('gameResultModal')">&times;</span>
            <h3 id="modalTitle" class="text-xl font-semibold mb-3">éŠæˆ²çµæŸï¼</h3>
            <p id="modalMessage" class="mb-4"></p>
            <button id="modalButton" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg" onclick="closeModal('gameResultModal')">çŸ¥é“äº†</button>
        </div>
    </div>


    <script>
        // Tab script
        function openTab(event, tabName) {
            let i, tabcontent, tabbuttons;
            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
            }
            tabbuttons = document.getElementsByClassName("tab-button");
            for (i = 0; i < tabbuttons.length; i++) {
                tabbuttons[i].className = tabbuttons[i].className.replace(" active", "");
            }
            document.getElementById(tabName).style.display = "block";
            event.currentTarget.className += " active";
        }

        // MIND Diet Score Calculator
        function calculateMindScore() {
            const form = document.getElementById('mindDietForm');
            const checkboxes = form.querySelectorAll('input[type="checkbox"]');
            let score = 0;
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    score += parseInt(checkbox.dataset.points);
                }
            });
            const resultDiv = document.getElementById('mindScoreResult');
            resultDiv.textContent = `æ‚¨çš„MINDé£²é£Ÿ adherence åˆ†æ•¸ï¼š ${score} / ${checkboxes.length}ã€‚åˆ†æ•¸è¶Šé«˜ä»£è¡¨è¶Šæ¥è¿‘MINDé£²é£Ÿå»ºè­°ã€‚`;
            if (score >= checkboxes.length * 0.75) { // Example threshold
                 resultDiv.textContent += " åšå¾—å¾ˆæ£’ï¼ç¹¼çºŒä¿æŒï¼";
                 resultDiv.className = "mt-4 text-lg font-semibold text-green-600";
            } else if (score >= checkboxes.length * 0.5) {
                 resultDiv.textContent += " ä¸éŒ¯ï¼Œä½†é‚„æœ‰é€²æ­¥ç©ºé–“ï¼";
                 resultDiv.className = "mt-4 text-lg font-semibold text-yellow-600";
            } else {
                 resultDiv.textContent += " åŠ æ²¹ï¼å¯ä»¥åƒè€ƒå­¸ç¿’é‡é»ä¸­çš„MINDé£²é£Ÿå»ºè­°ä¾†èª¿æ•´ã€‚";
                 resultDiv.className = "mt-4 text-lg font-semibold text-red-600";
            }
        }

        // Weekly Activity Planner
        function getActivitySuggestion() {
            const activityType = document.getElementById('activityType').value;
            const suggestionResult = document.getElementById('activitySuggestionResult');
            let suggestion = "";
            switch (activityType) {
                case 'aerobic':
                    suggestion = "<strong>æœ‰æ°§é‹å‹•å»ºè­°ï¼š</strong><br>ç›®æ¨™ï¼šæ¯é€±è‡³å°‘150åˆ†é˜ä¸­ç­‰å¼·åº¦æˆ–75åˆ†é˜é«˜å¼·åº¦ã€‚<br>ç¯„ä¾‹ï¼š<br>- é€±ä¸€ã€ä¸‰ã€äº”ï¼šå¿«èµ°30åˆ†é˜ã€‚<br>- é€±äºŒã€å››ï¼šæ¸¸æ³³30åˆ†é˜ã€‚<br>- é€±æœ«ï¼šèˆ‡å®¶äººæœ‹å‹é¨è‡ªè¡Œè»Š60åˆ†é˜ã€‚<br>å°æç¤ºï¼šé¸æ“‡æ‚¨å–œæ­¡çš„æ´»å‹•ï¼Œåˆ†æ•£åœ¨ä¸€é€±å…§é€²è¡Œã€‚";
                    break;
                case 'strength':
                    suggestion = "<strong>è‚ŒåŠ›è¨“ç·´å»ºè­°ï¼š</strong><br>ç›®æ¨™ï¼šæ¯é€±è‡³å°‘2æ¬¡ï¼Œé‡å°ä¸»è¦è‚Œç¾¤ã€‚<br>ç¯„ä¾‹ï¼š<br>- é€±äºŒï¼šæ·±è¹²ã€å¼“ç®­æ­¥ã€ä¼åœ°æŒºèº«ã€åˆ’èˆ¹ (å„3çµ„ï¼Œæ¯çµ„8-12ä¸‹)ã€‚<br>- é€±äº”ï¼šç¡¬èˆ‰ã€è‚©éƒ¨æ¨èˆ‰ã€å¼•é«”å‘ä¸Š (æˆ–è¼”åŠ©)ã€æ ¸å¿ƒè¨“ç·´ (å„3çµ„)ã€‚<br>å°æç¤ºï¼šå…©æ¬¡è¨“ç·´é–“éš”48å°æ™‚è®“è‚Œè‚‰æ¢å¾©ã€‚å¯ä½¿ç”¨è‡ªèº«é«”é‡ã€å•éˆ´æˆ–å¥èº«å™¨æã€‚";
                    break;
                case 'mindBody':
                    suggestion = "<strong>èº«å¿ƒé‹å‹•å»ºè­°ï¼š</strong><br>ç›®æ¨™ï¼šè¦å¾‹ç·´ç¿’ä»¥æ”¹å–„æƒ…ç·’ã€å¹³è¡¡å’Œå°ˆæ³¨åŠ›ã€‚<br>ç¯„ä¾‹ï¼š<br>- æ¯æ—¥ï¼š10-15åˆ†é˜å†¥æƒ³æˆ–æ·±å‘¼å¸ç·´ç¿’ã€‚<br>- æ¯é€±2-3æ¬¡ï¼šåƒåŠ ç‘œä¼½æˆ–å¤ªæ¥µæ‹³èª²ç¨‹ (æ¯æ¬¡45-60åˆ†é˜)ã€‚<br>- é€±æœ«ï¼šåœ¨å…¬åœ’ç·´ç¿’å¤ªæ¥µæ‹³30åˆ†é˜ã€‚<br>å°æç¤ºï¼šæŒä¹‹ä»¥æ†æ˜¯é—œéµã€‚";
                    break;
                case 'cognitive':
                    suggestion = "<strong>èªçŸ¥è¨“ç·´å»ºè­°ï¼š</strong><br>ç›®æ¨™ï¼šæ¯æ—¥é€²è¡Œè…¦åŠ›æ¿€ç›ªæ´»å‹•ã€‚<br>ç¯„ä¾‹ï¼š<br>- æ¯æ—¥ï¼šé–±è®€30åˆ†é˜ã€ç©æ•¸ç¨æˆ–å¡«å­—éŠæˆ²15åˆ†é˜ã€‚<br>- æ¯é€±ï¼šå­¸ç¿’æ–°èªè¨€å–®å­— (æ¯æ—¥15-20åˆ†é˜)ã€ç·´ç¿’æ¨‚å™¨ (æ¯æ—¥20-30åˆ†é˜)ã€‚<br>- é€±æœ«ï¼šå’Œæœ‹å‹ç©æ£‹ç›¤éŠæˆ²æˆ–ç­–ç•¥éŠæˆ²ã€‚<br>å°æç¤ºï¼šé¸æ“‡å…·æŒ‘æˆ°æ€§ä¸”è®“æ‚¨æ„Ÿèˆˆè¶£çš„æ´»å‹•ã€‚";
                    break;
                default:
                    suggestion = "è«‹é¸æ“‡ä¸€å€‹æ´»å‹•é¡å‹ä»¥ç²å–å»ºè­°ã€‚";
            }
            suggestionResult.innerHTML = suggestion;
        }

        // Memory Game Logic
        let memoryCards = [];
        let flippedCards = [];
        let matchedPairs = 0;
        let totalPairs = 0;
        let memoryGameActive = false;
        const memoryEmojis = ['ğŸ§ ', 'ğŸ’ª', 'ğŸ¥—', 'ğŸ“–', 'ğŸ¶', 'ğŸ˜´', 'ğŸ—£ï¸', 'ğŸ§˜']; // Brain, Exercise, Diet, Learning, Music, Sleep, Social, Mindful

        function startMemoryGame() {
            const gameContainer = document.getElementById('memoryGameContainer');
            gameContainer.innerHTML = ''; // Clear previous game
            memoryCards = [];
            flippedCards = [];
            matchedPairs = 0;
            memoryGameActive = true;
            
            let gameEmojis = memoryEmojis.slice(0, 4).concat(memoryEmojis.slice(0, 4)); // 4 pairs, 8 cards
            totalPairs = gameEmojis.length / 2;
            shuffleArray(gameEmojis);

            const grid = document.createElement('div');
            grid.className = 'memory-grid';

            gameEmojis.forEach(emoji => {
                const card = createMemoryCard(emoji);
                grid.appendChild(card);
                memoryCards.push(card);
            });
            gameContainer.appendChild(grid);
        }

        function createMemoryCard(emoji) {
            const card = document.createElement('div');
            card.classList.add('memory-card');
            card.dataset.emoji = emoji;

            const cardFaceFront = document.createElement('div');
            cardFaceFront.classList.add('card-face', 'card-front');
            // cardFaceFront.textContent = '?'; // Or keep it blank

            const cardFaceBack = document.createElement('div');
            cardFaceBack.classList.add('card-face', 'card-back');
            cardFaceBack.textContent = emoji;
            
            card.appendChild(cardFaceFront);
            card.appendChild(cardFaceBack);

            card.addEventListener('click', () => flipCard(card));
            return card;
        }

        function flipCard(card) {
            if (!memoryGameActive || flippedCards.length >= 2 || card.classList.contains('flipped') || card.classList.contains('matched')) {
                return;
            }
            card.classList.add('flipped');
            flippedCards.push(card);

            if (flippedCards.length === 2) {
                checkForMatch();
            }
        }

        function checkForMatch() {
            const [card1, card2] = flippedCards;
            if (card1.dataset.emoji === card2.dataset.emoji) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                matchedPairs++;
                flippedCards = [];
                if (matchedPairs === totalPairs) {
                    memoryGameActive = false;
                    setTimeout(() => showModal('gameResultModal', 'æ­å–œï¼', `æ‚¨æˆåŠŸæ‰¾åˆ°äº†æ‰€æœ‰ ${totalPairs} çµ„é…å°ï¼`, () => startMemoryGame()), 500);
                }
            } else {
                setTimeout(() => {
                    card1.classList.remove('flipped');
                    card2.classList.remove('flipped');
                    flippedCards = [];
                }, 1000);
            }
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Quick Math Game
        let mathNum1, mathNum2, mathCorrectAnswer;
        function startMathGame() {
            mathNum1 = Math.floor(Math.random() * 10) + 1;
            mathNum2 = Math.floor(Math.random() * 10) + 1;
            const operations = ['+', '-', '*'];
            const operation = operations[Math.floor(Math.random() * operations.length)];
            
            let problemText = `${mathNum1} ${operation} ${mathNum2} = ?`;
            if (operation === '-' && mathNum1 < mathNum2) { // Avoid negative results for simplicity
                [mathNum1, mathNum2] = [mathNum2, mathNum1];
                problemText = `${mathNum1} ${operation} ${mathNum2} = ?`;
            }

            document.getElementById('mathProblem').textContent = problemText;
            document.getElementById('mathAnswer').value = '';
            document.getElementById('mathResult').textContent = '';

            switch (operation) {
                case '+': mathCorrectAnswer = mathNum1 + mathNum2; break;
                case '-': mathCorrectAnswer = mathNum1 - mathNum2; break;
                case '*': mathCorrectAnswer = mathNum1 * mathNum2; break;
            }
        }

        function checkMathAnswer() {
            const userAnswer = parseInt(document.getElementById('mathAnswer').value);
            const resultDiv = document.getElementById('mathResult');
            if (isNaN(userAnswer)) {
                resultDiv.textContent = "è«‹è¼¸å…¥æ•¸å­—ç­”æ¡ˆã€‚";
                resultDiv.className = "mt-2 text-sm text-red-500";
                return;
            }
            if (userAnswer === mathCorrectAnswer) {
                resultDiv.textContent = "ç­”å°äº†ï¼å¤ªæ£’äº†ï¼";
                resultDiv.className = "mt-2 text-sm text-green-500";
                setTimeout(startMathGame, 1500); // New problem after correct answer
            } else {
                resultDiv.textContent = `ä¸å°å–”ï¼Œæ­£ç¢ºç­”æ¡ˆæ˜¯ ${mathCorrectAnswer}ã€‚å†è©¦ä¸€æ¬¡ï¼`;
                resultDiv.className = "mt-2 text-sm text-red-500";
            }
        }
        
        // Word Scramble Game
        const brainWords = ["å¤§è…¦", "å­¸ç¿’", "è¨˜æ†¶", "é‹å‹•", "é£²é£Ÿ", "æ€è€ƒ", "ç¥ç¶“", "å¥åº·", "å°ˆæ³¨"];
        let currentWord = "";
        let currentScrambled = "";

        function scrambleWord(word) {
            let arr = word.split('');
            for (let i = arr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr.join('');
        }

        function startWordScramble() {
            currentWord = brainWords[Math.floor(Math.random() * brainWords.length)];
            currentScrambled = scrambleWord(currentWord);
            // Ensure it's actually scrambled, especially for short words
            while(currentScrambled === currentWord && currentWord.length > 1) {
                 currentScrambled = scrambleWord(currentWord);
            }
            document.getElementById('scrambledWord').textContent = currentScrambled;
            document.getElementById('wordGuess').value = '';
            document.getElementById('wordScrambleResult').textContent = '';
        }

        function checkWordGuess() {
            const userGuess = document.getElementById('wordGuess').value.trim();
            const resultDiv = document.getElementById('wordScrambleResult');
            if (userGuess === "") {
                resultDiv.textContent = "è«‹è¼¸å…¥æ‚¨çŒœçš„è©å½™ã€‚";
                resultDiv.className = "mt-2 text-sm text-red-500";
                return;
            }
            if (userGuess === currentWord) {
                resultDiv.textContent = "ç­”å°äº†ï¼å°±æ˜¯ã€Œ" + currentWord + "ã€ï¼";
                resultDiv.className = "mt-2 text-sm text-green-500";
                setTimeout(startWordScramble, 2000); 
            } else {
                resultDiv.textContent = "ä¸å°å–”ï¼Œå†æƒ³æƒ³çœ‹ï¼";
                resultDiv.className = "mt-2 text-sm text-red-500";
            }
        }


        // Modal functions
        function showModal(modalId, title, message, buttonAction) {
            const modal = document.getElementById(modalId);
            document.getElementById('modalTitle').textContent = title;
            document.getElementById('modalMessage').textContent = message;
            const modalButton = document.getElementById('modalButton');
            
            if (buttonAction) {
                // Clone and replace the button to remove old event listeners
                const newButton = modalButton.cloneNode(true);
                modalButton.parentNode.replaceChild(newButton, modalButton);
                document.getElementById('modalButton').textContent = "å†ç©ä¸€æ¬¡"; // Or specific text
                document.getElementById('modalButton').onclick = () => {
                    closeModal(modalId);
                    buttonAction();
                };
            } else {
                 document.getElementById('modalButton').textContent = "çŸ¥é“äº†";
                 document.getElementById('modalButton').onclick = () => closeModal(modalId);
            }
            modal.style.display = "block";
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = "none";
        }

        // Close modal if user clicks outside of it
        window.onclick = function(event) {
            const modal = document.getElementById('gameResultModal');
            if (event.target == modal) {
                closeModal('gameResultModal');
            }
        }

        // Initialize default tab and games
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelector('.tab-button.active').click(); // Activate the first tab
            startMathGame(); // Initialize first math problem
            startWordScramble(); // Initialize first word scramble
        });

    </script>
</body>
</html>
